Vagrant.configure(2) do |config|

  config.vm.box = "box-cutter/ubuntu1404-desktop"

  config.vm.box_check_update = false 

  config.vm.provider "virtualbox" do |vb| 

  vb.gui = true  

  vb.memory = "2048"
  
  vb.name = "FSE-2013-aPET1"

end


config.vm.provision "shell", inline: <<-SHELL

  apt-get update 

  cd Desktop

  #wget https://eclipse.org/downloads/packages/release/Helios/SR2/eclipse-java-helios-SR2-linux-gtk-x86_64.tar.gz

  #tar -zxvf eclipse-java-helios-SR2-linux-gtk-x86_64.tar.gz

  #rm eclipse-java-helios-SR2-linux-gtk-x86_64.tar.gz
   
  #chown -R vagrant: eclipse

  chown -R vagrant "/home/vagrant/Desktop"
  
  chmod -R a+rwx "/home/vagrant/Desktop"
  
  # Install Adobe Flash Player plugin to view youtube videos
  #apt-get install flashplugin-installer 

  # Add Eclipse as startup application
  echo "+++++++++++++"
  mkdir "/home/vagrant/.config/autostart"
  echo "+++++++++++++"
  wget -O "/home/vagrant/.config/autostart/eclipse.desktop" https://github.com/SoftwareEngineeringToolDemos/FSE-2013-aPET/blob/master/build-vm/vm-contents/eclipse.desktop

  # Disable screen lock
  mkdir "/home/vagrant/scripts"
  wget -O "/home/vagrant/scripts/screenlock.sh" https://github.com/SoftwareEngineeringToolDemos/FSE-2013-aPET/blob/master/build-vm/vm-contents/screenlock.sh
  wget -O "/home/vagrant/.config/autostart/screenlock.desktop" https://github.com/SoftwareEngineeringToolDemos/FSE-2013-aPET/blob/master/build-vm/vm-contents/screenlock.desktop
  chmod -R a+rwx "/home/vagrant/scripts/"
  
  # Reboot the VM
  sudo reboot

  SHELL

end
